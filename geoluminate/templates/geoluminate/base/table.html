{% extends 'django_tables2/bootstrap5.html' %}
{% load l10n %}

{% block table-wrapper %}
  <div class="fairdm-table table-container table-responsive flex-grow-1">
    {% block table %}
      {{ block.super }}
    {% endblock table %}

    {% block pagination %}
    {% endblock pagination %}

  </div>
{% endblock table-wrapper %}

{% block table.tbody.row %}
  {% if forloop.first and table.page.has_next %}
    <tr {{ row.attrs.as_html }} hx-get preload="htmx:afterSettle" hx-vals="{'page': '{{ table.page.next_page_number }}'}" hx-trigger="intersect once" hx-target="tbody" hx-swap="beforeend" hx-select="tbody tr">
    {% else %}
      <tr {{ row.attrs.as_html }}>
      {% endif %}
      {% for column, cell in row.items %}
        <td {{ column.attrs.td.as_html }}>
          {% if column.localize == None %}
            {{ cell }}
          {% else %}
            {% if column.localize %}
              {{ cell|localize }}
            {% else %}
              {{ cell|unlocalize }}
            {% endif %}
          {% endif %}
        </td>
      {% endfor %}
    </tr>
  {% endblock table.tbody.row %}
